<!DOCTYPE html>
<html>
<head>
	<title>Window Layers Tests</title>
	<link rel="stylesheet" type="text/css" href="/window_layers.css">
	<link rel="stylesheet" type="text/css" href="./style.css">
	<script type="module" src='../src/window_layers.js'></script>
	<script type="module">
		// make available to inline event handlers via short alias
		window.wl = window_layers;
		import * as test_utils from './test_utils.js'

		// short alias, available in inline event handlers
		window.wl = window_layers;

		(async function() {
			const wl = window_layers;

			// await wl.push(
			// 	'./test_child_is_full_size.html',
			// 	wl.simple_full_iframe, test_utils.run_tests,
			// );
			// await wl.push(
			// 	'./nest_test_1.html',
			// 	wl.simple_full_iframe, test_utils.run_tests,
			// );
			// await wl.push(
			// 	'./focus_management_1.html',
			// 	wl.simple_full_iframe, test_utils.run_tests,
			// );
		})();
	</script>
</head>
<body>
	<h2>Basic/Full Layer Tests</h2>
	<p>
		<button onclick="wl.push('./basic_full_layer.html')">
			Open Full Layer Modal
		</button>
	</p>

	<h2>Auto-centering Layer</h2>
	Resize the iframe and verify that:
	<ul>
		<li>Height is bounded (and respects the "wrapper_padding" value passed to auto_centering)</li>
		<li>Width is bounded (and respects the "wrapper_padding" value passed to auto_centering)</li>
		<li>Iframe shifts toward top of viewport when small - looks more balanced that way, closer to how alert() windows look</li>
	</ul>
	<p>
		<button onclick="wl.push('./user_sizable.html', wl.auto_centering, wl.shadow_border, wl.easy_exit, {
			on_created: function(iframe) {
				iframe.style.width = '300px';
				iframe.style.height = '200px';
			},
			on_load: function(iframe) {
				iframe.contentWindow.iframe = iframe;
			},
		})">Open Auto-centering</button>
	</p>


	<p>
		<button onclick="
			this.nextElementSibling.focus();
			window_layers.push('./close_with_button.html');
		">Click Me</button>
		<input type="" name="">
		<br>
		Was the input's focus restored after window layer was resolved?
		<button onclick="
			window.test_utils.log_test(true, 'root window focus is restored after last layer is resolved')
		">Yes</button>
		<button onclick="
			window.test_utils.log_test(false, 'root window focus is restored after last layer is resolved')
		">No</button>
	</p>

	<p>
		<button onclick="
			wl.push('./auto_sizing_test.html', wl.simple_full_iframe, wl.auto_sizing);
		">Push auto-sizing window</button>
	</p>




	<div style="width: 100px;">
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
		tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
		quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
		consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
		cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
		proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
		tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
		quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
		consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
		cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
		proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
		tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
		quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
		consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
		cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
		proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
		tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
		quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
		consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
		cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
		proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
		tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
		quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
		consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
		cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
		proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
	</div>
</body>
</html>